{% extends 'app/base.html' %}
{% load static %}
{% load listing_card %}

{%block title_block %}{{user.username}}{% endblock %}

{% block body_block %}
<div class="container">
    <h2>Profile</h2>
    <table class="profile-table">
        <tr>
            <th>Name</th>
            <td>{{ user.first_name }} {{ user.last_name }}</td>
            <td><button class="btn btn-primary-dark" onclick="window.location.href='/profile/edit?autofocus=first_name'">Change</button></td>
        </tr>
        <tr>
            <th>Email</th>
            <td>{{ user.email }}</td>
            <td><button class="btn btn-primary-dark" onclick="window.location.href='/profile/edit?autofocus=email'">Change</button></td>
        </tr>
        <tr>
            <th>Username</th>
            <td>{{ user.username }}</td>
            <td><button class="btn btn-primary-dark" onclick="window.location.href='/profile/edit?autofocus=username'">Change</button></td>
        </tr>
        <tr>
            <th>Password</th>
            <td>********</td>
            <td><button class="btn btn-primary-dark" onclick="window.location.href='/profile/change-password'">Change</button></td>
        </tr>
        <tr>
            <th>Rating</th>
            <td>{{ user.rating }}</td>
            <td></td>
        </tr>
    </table>

    <div class="text-center mb-4">
        <a href="{% url 'app:listing_create' %}" class="btn btn-primary">Create a New Listing</a>
    </div>
    <h2>Your Listings</h2>
    
    <div class="row g-4">
        {% for listing in listings %}
            <div class="col col-12 col-md-6 col-lg-4">
                {% render_listing listing %}
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
